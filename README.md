# WebSocketサンプルアプリケーション

Bunを使用した簡易WebSocketチャットアプリケーションのサンプルプロジェクトです。このアプリケーションでは、複数のクライアント間でリアルタイムにメッセージを送受信することができます。

## 機能

- リアルタイムチャット機能
- 接続・切断通知
- クライアントIDの自動割り当て
- 複数クライアント間のメッセージブロードキャスト

## 必要条件

- [Bun](https://bun.sh/) ランタイム
- モダンなWebブラウザ (Chrome, Firefox, Safari, Edge など)

## ファイル構成

```
websocket-app/
├── server.js           # Bun WebSocketサーバー
└── public/
    └── index.html      # WebSocketクライアント
```

## セットアップと実行方法

### サーバーのセットアップ

1. Bunがインストールされていない場合は、[Bunの公式サイト](https://bun.sh/)からインストールしてください。

2. プロジェクトフォルダを作成し、`server.js`ファイルをプロジェクトのルートディレクトリに保存してください。

3. 以下のコマンドでサーバーを起動します：

```bash
bun run server.js
```

4. サーバーが正常に起動すると、次のメッセージが表示されます：

```
WebSocketサーバーを起動しました。ポート: 2236
```

### クライアントのセットアップ

1. `public`フォルダを作成し、`index.html`ファイルを保存します。

2. ブラウザで`index.html`ファイルを開きます（ファイルシステムから直接開くことができます）。

3. 「接続」ボタンをクリックしてWebSocketサーバーに接続します。

4. 接続が成功すると、ステータス表示が「接続済み」に変わります。

## 使い方

1. 複数のブラウザウィンドウまたはタブで`index.html`を開きます。

2. 各ウィンドウ/タブで「接続」ボタンをクリックしてサーバーに接続します。

3. メッセージ入力欄にテキストを入力し、「送信」ボタンをクリックするか、Enterキーを押してメッセージを送信します。

4. 送信したメッセージは全ての接続クライアントにブロードキャストされます。

## WebSocketについて

WebSocketは、クライアントとサーバー間の双方向通信を可能にするプロトコルです。従来のHTTP通信とは異なり、一度接続が確立されると、クライアントとサーバーの両方がいつでもデータを送信できるようになります。この特性により、チャットアプリケーションやリアルタイム更新が必要なアプリケーションに最適です。

## カスタマイズ

このサンプルアプリケーションは基本的な機能のみを実装しています。以下のような機能を追加することで、より高度なアプリケーションにカスタマイズできます：

- ユーザー名の設定
- メッセージの永続化（データベースへの保存）
- プライベートメッセージ機能
- タイピング通知
- 既読確認機能
- ファイル共有機能

## トラブルシューティング

### 接続の問題

- サーバーが正常に起動していることを確認してください。
- WebSocketのURLが正しいことを確認してください（デフォルトは`ws://localhost:2236`）。
- ファイアウォールまたはセキュリティソフトウェアがWebSocket接続をブロックしていないか確認してください。

### メッセージが届かない問題

- サーバーのコンソール出力でエラーがないか確認してください。
- 複数のクライアントが同一のサーバーに接続されていることを確認してください。

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。詳細については、LICENSEファイルを参照してください。

## 参考資料

- [WebSocketの仕様](https://developer.mozilla.org/ja/docs/Web/API/WebSockets_API)
- [Bunのドキュメント](https://bun.sh/docs)